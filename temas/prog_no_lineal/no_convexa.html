<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Programación No Convexa</title>
  </head>
  <body>
    <header class="hero">
      <h1>Programación No Convexa</h1>
    </header>
    <div class="container">
      <form id="optimizationForm">
        <label for="functionInput"
          >Función objetivo (en formato JavaScript, ej:
          (x-1)*(x-2)*(x-3)*(x-4)*(x-5)):</label
        >
        <input
          type="text"
          id="functionInput"
          value="(x-1)*(x-2)*(x-3)*(x-4)*(x-5)"
          required
        />

        <label for="lowerBound">Límite inferior:</label>
        <input type="number" id="lowerBound" value="1" required />

        <label for="upperBound">Límite superior:</label>
        <input type="number" id="upperBound" value="5" required />

        <label for="initialGuess">Punto inicial:</label>
        <input type="number" id="initialGuess" value="3" required />

        <button type="button" onclick="optimize()">Calcular Mínimo</button>
      </form>

      <div id="resultados"></div>
    </div>

    <script>
      function optimize() {
        // Obtener valores del formulario
        const funcInput = document.getElementById('functionInput').value;
        const lowerBound = parseFloat(
          document.getElementById('lowerBound').value
        );
        const upperBound = parseFloat(
          document.getElementById('upperBound').value
        );
        const initialGuess = parseFloat(
          document.getElementById('initialGuess').value
        );

        // Convertir la función objetivo a una función de JavaScript
        const objectiveFunction = new Function('x', `return ${funcInput};`);

        // Algoritmo para minimizar (Método de gradiente aproximado)
        let x = initialGuess;
        let stepSize = 0.01; // Tamaño de paso
        let tolerance = 1e-6; // Tolerancia
        let maxIterations = 1000;
        let iterations = 0;

        while (iterations < maxIterations) {
          const gradient =
            (objectiveFunction(x + stepSize) - objectiveFunction(x)) / stepSize;

          // Actualizar x usando gradiente descendente
          x -= stepSize * gradient;

          // Limitar x dentro de los límites
          if (x < lowerBound) x = lowerBound;
          if (x > upperBound) x = upperBound;

          // Condición de parada
          if (Math.abs(gradient) < tolerance) break;

          iterations++;
        }

        // Calcular el valor mínimo
        const minValue = objectiveFunction(x);

        // Mostrar resultados
        document.getElementById('resultados').innerHTML = `
                <h2>Resultados:</h2>
                <p><strong>Valor óptimo para x:</strong> ${x.toFixed(6)}</p>
                <p><strong>Valor objetivo óptimo:</strong> ${minValue.toFixed(
                  6
                )}</p>
            `;
      }
    </script>
  </body>
</html>
